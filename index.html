<html>
<head>
  <title>Test iFrame widget</title>
</head>
<body>
<h1>Test iFrame widget</h1>
<h2>Realtime configs</h2>
<ul id="realtime_configs"></ul>
<h2>History configs</h2>
<ul id="history_configs"></ul>
<script src="https://www.unpkg.com/@eohjsc/era-widget@1.0.14/src/index.js"></script>
<script>
  const eraWidget = new EraWidget();
  eraWidget.onConfiguration((configuration) => {
    document.getElementById('realtime_configs').innerHTML = ''
    configuration.realtime_configs?.map((config) => {
      const li = document.createElement('li');
      li.textContent = JSON.stringify(config);
      document.getElementById('realtime_configs').appendChild(li);
      console.log('check config value:  ', configuration.realtime_configs?.map.config);
    });

    let config = null;
    eraWidget.onConfiguration((configuration) => {
      config = configuration.realtime_configs[0];
    })
    eraWidget.onValues((values) => {
      const input = document.getElementById('the_switch');
      var check_get_value = values[config.id].value;
      console.log('check_get_value is: ', check_get_value);
    });
 
    document.getElementById('history_configs').innerHTML = ''
    configuration.history_configs?.map((config) => {
      const li = document.createElement('li');
      li.textContent = JSON.stringify(config);
      document.getElementById('history_configs').appendChild(li);
    });
  })
  eraWidget.ready();
</script>
  <div>Check the realtime value</div>
  <pan id = "the_switch"></pan>
</body>
</html>
 
